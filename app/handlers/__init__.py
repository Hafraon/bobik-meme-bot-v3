#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
üéØ HANDLERS –ú–û–î–£–õ–¨ - –ü–†–ê–í–ò–õ–¨–ù–ê –†–ï–Ñ–°–¢–†–ê–¶–Ü–Ø üéØ
"""

import logging
from aiogram import Dispatcher, F
from aiogram.types import Message, CallbackQuery
from aiogram.filters import Command, CommandStart

logger = logging.getLogger(__name__)

def register_all_handlers(dp: Dispatcher):
    """üéØ –ì–û–õ–û–í–ù–ê –§–£–ù–ö–¶–Ü–Ø –†–ï–Ñ–°–¢–†–ê–¶–Ü–á –í–°–Ü–• HANDLERS"""
    logger.info("üéØ –ü–æ—á–∞—Ç–æ–∫ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó handlers...")
    
    # –ö–æ–º–∞–Ω–¥–∞ /start
    @dp.message(CommandStart())
    async def start_handler(message: Message):
        await message.answer(
            "ü§ñ <b>–ü—Ä–∏–≤—ñ—Ç! –Ø —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –º–µ–º-–±–æ—Ç –∑ –≥–µ–π–º—ñ—Ñ—ñ–∫–∞—Ü—ñ—î—é!</b>\n\n"
            "üìã <b>–ö–æ–º–∞–Ω–¥–∏:</b>\n"
            "‚Ä¢ /help - –¥–æ–≤—ñ–¥–∫–∞ –ø–æ –±–æ—Ç—É\n"
            "‚Ä¢ /meme - –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –º–µ–º\n"
            "‚Ä¢ /anekdot - —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –∞–Ω–µ–∫–¥–æ—Ç\n"
            "‚Ä¢ /profile - –º—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å\n"
            "‚Ä¢ /top - —Ç–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤\n"
            "‚Ä¢ /submit - –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç\n"
            "‚Ä¢ /admin - –ø–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω–∞\n\n"
            "üéÆ <b>–ì–µ–π–º—ñ—Ñ—ñ–∫–∞—Ü—ñ—è:</b>\n"
            "–ó–∞—Ä–æ–±–ª—è–π—Ç–µ –±–∞–ª–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –ø—ñ–¥–≤–∏—â—É–π—Ç–µ —Å–≤—ñ–π —Ä–∞–Ω–≥!"
        )
    
    # –ö–æ–º–∞–Ω–¥–∞ /help
    @dp.message(Command("help"))
    async def help_handler(message: Message):
        await message.answer(
            "‚ùì <b>–î–û–í–Ü–î–ö–ê –ü–û –ë–û–¢–£</b>\n\n"
            "üéÆ <b>–ì–µ–π–º—ñ—Ñ—ñ–∫–∞—Ü—ñ—è:</b>\n"
            "‚Ä¢ –û—Ç—Ä–∏–º—É–π—Ç–µ –±–∞–ª–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å\n"
            "‚Ä¢ –ü—ñ–¥–≤–∏—â—É–π—Ç–µ —Å–≤—ñ–π —Ä–∞–Ω–≥\n"
            "‚Ä¢ –ë–µ—Ä—ñ—Ç—å —É—á–∞—Å—Ç—å –≤ –¥—É–µ–ª—è—Ö\n\n"
            "üìù <b>–ö–æ–Ω—Ç–µ–Ω—Ç:</b>\n"
            "‚Ä¢ /meme - –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –º–µ–º\n"
            "‚Ä¢ /anekdot - —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –∞–Ω–µ–∫–¥–æ—Ç\n"
            "‚Ä¢ /submit - –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ —Å–≤—ñ–π –∂–∞—Ä—Ç\n\n"
            "üë§ <b>–ü—Ä–æ—Ñ—ñ–ª—å:</b>\n"
            "‚Ä¢ /profile - –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å\n"
            "‚Ä¢ /top - —Ç–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤\n\n"
            "‚öîÔ∏è <b>–î—É–µ–ª—ñ:</b>\n"
            "‚Ä¢ /duel - —Ä–æ–∑–ø–æ—á–∞—Ç–∏ –¥—É–µ–ª—å –∂–∞—Ä—Ç—ñ–≤\n\n"
            "üõ°Ô∏è <b>–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è:</b>\n"
            "‚Ä¢ /admin - –ø–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞"
        )
    
    # –ö–æ–º–∞–Ω–¥–∞ /meme
    @dp.message(Command("meme"))
    async def meme_handler(message: Message):
        memes = [
            "üòÇ <b>–ü—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç —ñ –∫–∞–≤–∞</b>\n\n–ü—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç –∑–∞—Ö–æ–¥–∏—Ç—å –≤ –∫–∞—Ñ–µ —ñ –∑–∞–º–æ–≤–ª—è—î –∫–∞–≤—É.\n–ë–∞—Ä–∏—Å—Ç–∞ –ø–∏—Ç–∞—î: 'Java —á–∏ Python?'\n–ü—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç: '–¢–∞ –Ω—ñ, –∑–≤–∏—á–∞–π–Ω—É –∫–∞–≤—É!'",
            "ü§£ <b>–†—ñ–∑–¥–≤–æ —Ç–∞ –•–µ–ª–ª–æ—É—ó–Ω</b>\n\n–ß–æ–º—É –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∏ –∑–∞–≤–∂–¥–∏ –ø–ª—É—Ç–∞—é—Ç—å –†—ñ–∑–¥–≤–æ —Ç–∞ –•–µ–ª–ª–æ—É—ó–Ω?\n–ë–æ Oct 31 == Dec 25!",
            "üòÑ <b>–õ–∞–º–ø–æ—á–∫–∞ —Ç–∞ –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∏</b>\n\n–°–∫—ñ–ª—å–∫–∏ –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç—ñ–≤ –ø–æ—Ç—Ä—ñ–±–Ω–æ, —â–æ–± –∑–∞–∫—Ä—É—Ç–∏—Ç–∏ –ª–∞–º–ø–æ—á–∫—É?\n–ñ–æ–¥–Ω–æ–≥–æ - —Ü–µ –∞–ø–∞—Ä–∞—Ç–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞!",
            "ü§î <b>–î–≤–∞ –±–∞–π—Ç–∏ –≤ –±–∞—Ä—ñ</b>\n\n–î–≤–∞ –±–∞–π—Ç–∏ –∑—É—Å—Ç—Ä—ñ–ª–∏—Å—è –≤ –±–∞—Ä—ñ.\n–û–¥–∏–Ω –∫–∞–∂–µ: '–£ –º–µ–Ω–µ –±—ñ—Ç –±–æ–ª–∏—Ç—å!'\n–î—Ä—É–≥–∏–π: '–¢–æ –ø–æ–±–∞–π—Ç–∏—Å—è —Ç—Ä–µ–±–∞!'",
            "üôÑ <b>QA —Ç–µ—Å—Ç–µ—Ä</b>\n\nQA —Ç–µ—Å—Ç–µ—Ä –∑–∞—Ö–æ–¥–∏—Ç—å –≤ –±–∞—Ä.\n–ó–∞–º–æ–≤–ª—è—î –ø–∏–≤–æ.\n–ó–∞–º–æ–≤–ª—è—î 0 –ø–∏–≤.\n–ó–∞–º–æ–≤–ª—è—î 999999999 –ø–∏–≤.\n–ó–∞–º–æ–≤–ª—è—î —è—â—ñ—Ä–∫—É.\n–ó–∞–º–æ–≤–ª—è—î -1 –ø–∏–≤–æ.\n–ó–∞–º–æ–≤–ª—è—î NULL –ø–∏–≤–æ."
        ]
        import random
        meme = random.choice(memes)
        await message.answer(f"üé≠ –û—Å—å –≤–∞—à –º–µ–º:\n\n{meme}")
    
    # –ö–æ–º–∞–Ω–¥–∞ /anekdot
    @dp.message(Command("anekdot"))
    async def anekdot_handler(message: Message):
        anekdots = [
            "üá∫üá¶ <b>–¢—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∏</b>\n\n–£–∫—Ä–∞—ó–Ω–µ—Ü—å, —Ä–æ—Å—ñ—è–Ω–∏–Ω —Ç–∞ –±—ñ–ª–æ—Ä—É—Å —Å–ø–µ—Ä–µ—á–∞—é—Ç—å—Å—è, —Ö—Ç–æ –∫—Ä–∞—â–µ –ø—Ä–æ–≥—Ä–∞–º—É—î.\n–£–∫—Ä–∞—ó–Ω–µ—Ü—å –Ω–∞–ø–∏—Å–∞–≤ –∫—Ä–∞—Å–∏–≤–∏–π –∫–æ–¥.\n–ë—ñ–ª–æ—Ä—É—Å –Ω–∞–ø–∏—Å–∞–≤ —à–≤–∏–¥–∫–∏–π –∫–æ–¥.\n–†–æ—Å—ñ—è–Ω–∏–Ω —Å–∫–æ–ø—ñ—é–≤–∞–≤ –æ–±–∏–¥–≤–∞ —ñ —Å–∫–∞–∑–∞–≤ —â–æ —Å–∞–º –ø—Ä–∏–¥—É–º–∞–≤.",
            "üòÇ <b>–ü—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç —É –ª—ñ–∫–∞—Ä—è</b>\n\n–ü—Ä–∏—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç –¥–æ –ª—ñ–∫–∞—Ä—è:\n- –î–æ–∫—Ç–æ—Ä, —É –º–µ–Ω–µ –±–æ–ª–∏—Ç—å —Å–ø–∏–Ω–∞!\n- –ê —Ç–∏ –±–∞–≥–∞—Ç–æ —Å–∏–¥–∏—à –∑–∞ –∫–æ–º–ø'—é—Ç–µ—Ä–æ–º?\n- –¢–∞ –Ω—ñ, —Ç—ñ–ª—å–∫–∏ 18 –≥–æ–¥–∏–Ω –Ω–∞ –¥–µ–Ω—å!\n- –¶–µ –∂ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∞!",
            "ü§£ <b>–ü—Ä–∏—Ä–æ–¥–∞ —Ç–∞ –±–∞–≥–∏</b>\n\n–ß–æ–º—É –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∏ –Ω–µ –ª—é–±–ª—è—Ç—å –ø—Ä–∏—Ä–æ–¥—É?\n–ë–æ –≤–æ–Ω–∞ –º–∞—î –∑–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ –±–∞–≥—ñ–≤ —ñ –Ω–µ–º–∞—î –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó!",
            "üòÑ <b>–•–ª—ñ–± —Ç–∞ —è–π—Ü—è</b>\n\n–ü—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –¥–æ–¥–æ–º—É:\n- –î–æ—Ä–æ–≥–∏–π, –∫—É–ø–∏ —Ö–ª—ñ–±, —è–∫—â–æ –±—É–¥—É—Ç—å —è–π—Ü—è - –≤—ñ–∑—å–º–∏ 10\n–ü–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –∑ 10 –±–∞—Ç–æ–Ω–∞–º–∏.\n- –ß–æ–º—É —Ç–∞–∫ –±–∞–≥–∞—Ç–æ?\n- –ë—É–ª–∏ —è–π—Ü—è!",
            "ü§™ <b>–†–µ–∫—É—Ä—Å—ñ—è</b>\n\n–©–æ–± –∑—Ä–æ–∑—É–º—ñ—Ç–∏ —Ä–µ–∫—É—Ä—Å—ñ—é, —Å–ø–æ—á–∞—Ç–∫—É —Ç—Ä–µ–±–∞ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ —Ä–µ–∫—É—Ä—Å—ñ—é."
        ]
        import random
        anekdot = random.choice(anekdots)
        await message.answer(f"üé≠ –û—Å—å –≤–∞—à –∞–Ω–µ–∫–¥–æ—Ç:\n\n{anekdot}")
    
    # –ö–æ–º–∞–Ω–¥–∞ /profile
    @dp.message(Command("profile"))
    async def profile_handler(message: Message):
        user = message.from_user
        await message.answer(
            f"üë§ <b>–ü–†–û–§–Ü–õ–¨ –ö–û–†–ò–°–¢–£–í–ê–ß–ê</b>\n\n"
            f"üÜî ID: <code>{user.id}</code>\n"
            f"üë§ –Ü–º'—è: {user.first_name or '–ù–µ–≤—ñ–¥–æ–º–µ'}\n"
            f"üì± Username: @{user.username or '–ù–µ–º–∞—î'}\n"
            f"üåê –ú–æ–≤–∞: {user.language_code or 'uk'}\n\n"
            f"üìä <b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</b>\n"
            f"üî• –ë–∞–ª–∏: <b>0</b> (–ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å)\n"
            f"üèÜ –†–∞–Ω–≥: ü§° <b>–ù–æ–≤–∞—á–æ–∫</b>\n"
            f"üìÖ –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å: –°—å–æ–≥–æ–¥–Ω—ñ\n\n"
            f"‚ÑπÔ∏è <i>–ü–æ–≤–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø—ñ—Å–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö</i>"
        )
    
    # –ö–æ–º–∞–Ω–¥–∞ /top
    @dp.message(Command("top"))
    async def top_handler(message: Message):
        await message.answer(
            "üèÜ <b>–¢–ê–ë–õ–ò–¶–Ø –õ–Ü–î–ï–†–Ü–í</b>\n\n"
            "1. üëë Demo User - 1500 –±–∞–ª—ñ–≤\n"
            "2. ü•à Test User - 1000 –±–∞–ª—ñ–≤\n"
            "3. ü•â Sample User - 500 –±–∞–ª—ñ–≤\n"
            "4. üèÖ Example User - 300 –±–∞–ª—ñ–≤\n"
            "5. üéñÔ∏è Another User - 150 –±–∞–ª—ñ–≤\n\n"
            "üìä –í–∞—à–∞ –ø–æ–∑–∏—Ü—ñ—è: #–Ω–æ–≤–∞—á–æ–∫\n\n"
            "‚ÑπÔ∏è <i>–†–µ–∞–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø—ñ—Å–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö</i>"
        )
    
    # –ö–æ–º–∞–Ω–¥–∞ /submit
    @dp.message(Command("submit"))
    async def submit_handler(message: Message):
        await message.answer(
            "üìù <b>–ü–û–î–ê–ß–ê –í–õ–ê–°–ù–û–ì–û –ö–û–ù–¢–ï–ù–¢–£</b>\n\n"
            "–§—É–Ω–∫—Ü—ñ—è –ø–æ–¥–∞—á—ñ –≤–ª–∞—Å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–µ–∑–∞–±–∞—Ä–æ–º!\n\n"
            "üìã <b>–©–æ –º–æ–∂–Ω–∞ –±—É–¥–µ –ø–æ–¥–∞–≤–∞—Ç–∏:</b>\n"
            "‚Ä¢ üòÇ –ñ–∞—Ä—Ç–∏ —Ç–∞ –∞–Ω–µ–∫–¥–æ—Ç–∏\n"
            "‚Ä¢ üñºÔ∏è –ú–µ–º–∏ (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ –ø—ñ–¥–ø–∏—Å–∞–º–∏)\n"
            "‚Ä¢ üìú –¶—ñ–∫–∞–≤—ñ —ñ—Å—Ç–æ—Ä—ñ—ó –∑ –∂–∏—Ç—Ç—è\n\n"
            "üéØ <b>–í–∏–Ω–∞–≥–æ—Ä–æ–¥–∞ –∑–∞ —Å—Ö–≤–∞–ª–µ–Ω–Ω—è:</b> +20 –±–∞–ª—ñ–≤\n"
            "üõ°Ô∏è <b>–ú–æ–¥–µ—Ä–∞—Ü—ñ—è:</b> –í—Å—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫—É\n\n"
            "‚ÑπÔ∏è <i>–ü–æ–∫–∏ —â–æ —Å–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏ /meme —Ç–∞ /anekdot –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≥–æ—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É</i>"
        )
    
    # –ö–æ–º–∞–Ω–¥–∞ /admin
    @dp.message(Command("admin"))
    async def admin_handler(message: Message):
        try:
            import os
            admin_id = int(os.getenv("ADMIN_ID", 603047391))
            
            if message.from_user.id == admin_id:
                await message.answer(
                    "üëë <b>–ü–ê–ù–ï–õ–¨ –ê–î–ú–Ü–ù–Ü–°–¢–†–ê–¢–û–†–ê</b>\n\n"
                    "üõ†Ô∏è <b>–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏:</b>\n"
                    "‚úÖ –ë–æ—Ç: –ê–∫—Ç–∏–≤–Ω–∏–π\n"
                    "‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö: –ü—ñ–¥–∫–ª—é—á–µ–Ω–∞\n"
                    "‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è: –ü—Ä–∞—Ü—é—î\n\n"
                    "üîß <b>–î–æ—Å—Ç—É–ø–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:</b>\n"
                    "‚Ä¢ /stats - –¥–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\n"
                    "‚Ä¢ –ú–æ–¥–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–Ω—Ç—É\n"
                    "‚Ä¢ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏\n"
                    "‚Ä¢ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó\n\n"
                    "üìä <b>–®–≤–∏–¥–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</b>\n"
                    "üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...\n"
                    "üìù –ö–æ–Ω—Ç–µ–Ω—Ç—É: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...\n"
                    "‚öîÔ∏è –î—É–µ–ª–µ–π: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...\n\n"
                    "‚ÑπÔ∏è <i>–ü–æ–≤–Ω–∞ –ø–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ</i>"
                )
            else:
                await message.answer(
                    "‚ùå <b>–î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ</b>\n\n"
                    "–£ –≤–∞—Å –Ω–µ–º–∞—î –ø—Ä–∞–≤ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Ü—ñ—î—ó –ø–∞–Ω–µ–ª—ñ."
                )
        except Exception as e:
            await message.answer(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–∞–≤: {e}")
    
    # –û–±—Ä–æ–±–∫–∞ –≤—Å—ñ—Ö —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
    @dp.message(F.text & ~F.text.startswith('/'))
    async def text_handler(message: Message):
        await message.answer(
            "ü§ñ –ü—Ä–∏–≤—ñ—Ç! –Ø —Ä–æ–∑—É–º—ñ—é —Ç—ñ–ª—å–∫–∏ –∫–æ–º–∞–Ω–¥–∏.\n\n"
            "üìã <b>–°–ø—Ä–æ–±—É–π—Ç–µ:</b>\n"
            "/start - –ø–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É\n"
            "/help - –ø–æ–≤–Ω–∞ –¥–æ–≤—ñ–¥–∫–∞\n"
            "/meme - –æ—Ç—Ä–∏–º–∞—Ç–∏ –º–µ–º\n"
            "/anekdot - –æ—Ç—Ä–∏–º–∞—Ç–∏ –∞–Ω–µ–∫–¥–æ—Ç\n"
            "/profile - –≤–∞—à –ø—Ä–æ—Ñ—ñ–ª—å"
        )
    
    # –û–±—Ä–æ–±–∫–∞ callback queries
    @dp.callback_query()
    async def callback_handler(callback: CallbackQuery):
        await callback.answer("üîß –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –ø–æ–∫–∏ —â–æ –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ!")
        await callback.message.answer("üîß –§—É–Ω–∫—Ü—ñ—è –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω–Ω—è—Ö.")
    
    # –û–±—Ä–æ–±–∫–∞ —ñ–Ω—à–∏—Ö —Ç–∏–ø—ñ–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
    @dp.message()
    async def other_handler(message: Message):
        await message.answer(
            "ü§ñ –Ø –ø–æ–∫–∏ —â–æ –æ–±—Ä–æ–±–ª—è—é —Ç—ñ–ª—å–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∞ –∫–æ–º–∞–Ω–¥–∏.\n\n"
            "–ù–∞–¥—ñ—à–ª—ñ—Ç—å /help –¥–ª—è —Å–ø–∏—Å–∫—É –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∫–æ–º–∞–Ω–¥."
        )
    
    # Error handler
    @dp.error()
    async def error_handler(event, exception):
        logger.error(f"‚ùå Unhandled error: {exception}")
        try:
            if hasattr(event, 'message') and event.message:
                await event.message.answer(
                    "üòÖ <b>–í–∏–±–∞—á—Ç–µ, —Å—Ç–∞–ª–∞—Å—è —Ç–µ—Ö–Ω—ñ—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞!</b>\n\n"
                    "–°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑ –∞–±–æ —Å–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—è –∫–æ–º–∞–Ω–¥–æ—é /help"
                )
        except:
            pass
    
    logger.info("‚úÖ –í—Å—ñ handlers –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ")

# –ï–∫—Å–ø–æ—Ä—Ç
__all__ = ['register_all_handlers']

logger.info("üéÆ Handlers –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –∑ –ø–æ–≤–Ω–æ—é –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é")
